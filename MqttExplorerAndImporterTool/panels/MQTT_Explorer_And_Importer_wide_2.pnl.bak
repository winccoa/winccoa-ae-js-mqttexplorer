<?xml version="1.0" encoding="UTF-8"?>
<panel version="14">
 <properties>
  <prop name="Name">
   <prop name="en_US.utf8"></prop>
   <prop name="de_AT.utf8"></prop>
   <prop name="ru_RU.utf8"></prop>
  </prop>
  <prop name="Size">1916 1080</prop>
  <prop name="BackColor">{0,0,40}</prop>
  <prop name="RefPoint">0 0</prop>
  <prop name="InitAndTermRef">True</prop>
  <prop name="SendClick">False</prop>
  <prop name="RefFileName"></prop>
  <prop name="DPI">120</prop>
  <prop name="PDPI">120</prop>
  <prop name="layoutType">None</prop>
 </properties>
 <events>
  <script isEscaped="1" name="ScopeLib"><![CDATA[const char SEPARATOR = 0xB; // Vertical tab
int threadID = -1;
    string myStyleButton =
    &quot;QPushButton {&quot;
    &quot;  background-color: #000028;&quot;       // Light gray background
    &quot;  color: #00FFB9;&quot;                  // Dark text
    &quot;  border: 1px solid #00FFB9;&quot;       // Blue border
    &quot;  border-radius: 0px;&quot;              // No rounding
    &quot;  padding: 6px 12px;&quot;
    &quot;  font-size: 14px;&quot;
    &quot;  font-weight: 500;&quot;
    &quot;  min-width: 80px;&quot;
    &quot;}&quot;
    &quot;QPushButton:hover {&quot;
    &quot;  background-color: #001F39;&quot;       // Light blue hover
  //  &quot;  color: #0078d4;&quot;
    &quot;  border-color: #00FFB9;&quot;           // Darker border on hover
    &quot;}&quot;
    &quot;QPushButton:pressed {&quot;
    &quot;  background-color: #16565C;&quot;       // Even darker on press
    &quot;  color: #00FFB9;&quot;                  // Dark text
    &quot;  border-color: #00FFB9;&quot;
    &quot;}&quot;;
     string myStyleInputField =
    &quot;QLineEdit {&quot;
    &quot;  background-color: #001F39;&quot;
    &quot;  color: #FFF;&quot;
    &quot;  border: 1px solid #FFF;&quot;
    &quot;  border-radius: 0px;&quot;
    &quot;  padding: 6px 12px;&quot;
    &quot;  font-size: 14px;&quot;
    &quot;  font-weight: 500;&quot;
    &quot;}&quot;
    &quot;QLineEdit:hover {&quot;
    &quot;  background-color: #001F39;&quot;
    &quot;  border-color: #00FFB9;&quot;
    &quot;}&quot;
    &quot;QLineEdit:focus {&quot;
//     &quot;  background-color: #16565C;&quot;
    &quot;  background-color: #16565C;&quot;
    &quot;  color: #FFF;&quot;
    &quot;  border-color: #00FFB9;&quot;
    &quot;}&quot;;

     string myStyleInputfielderror=
    &quot;QLineEdit {&quot;
    &quot;  background-color: #FF7687;&quot;
    &quot;  color: #FFF;&quot;
    &quot;  border: 2px solid #FF2640;&quot;
    &quot;  border-radius: 0px;&quot;
    &quot;  padding: 6px 12px;&quot;
    &quot;  font-size: 14px;&quot;
    &quot;  font-weight: 500;&quot;
    &quot;}&quot;
    &quot;QLineEdit:hover {&quot;
    &quot;  background-color: #001F39;&quot;
    &quot;  border-color: #00FFB9;&quot;
    &quot;}&quot;
    &quot;QLineEdit:focus {&quot;
//     &quot;  background-color: #16565C;&quot;
    &quot;  background-color: #16565C;&quot;
    &quot;  color: #FFF;&quot;
    &quot;  border-color: #00FFB9;&quot;
    &quot;}&quot;;

public void loadJson(string sJson = &quot;&quot;)
{
  mapping map = jsonDecode(sJson);
  TREE.updatesEnabled = FALSE;
  showJson(getShape(&quot;TREE&quot;), map);
  TREE.updatesEnabled = TRUE;
}

void showJson(shape tree, const anytype &amp;collection, string parent = &quot;&quot;)
{
  dyn_anytype array = collection;

  if (getType(collection) == MAPPING_VAR)
  {
    array = mappingKeys(collection);

    // Show the mapping contains in alphabetical order
    dynSort(array);
  }

  for (int i = 1; i &lt;= dynlen(array); i++)
  {
    mixed key = i;
    mixed value;

    if (getType(collection) == MAPPING_VAR)
    {
      key   = array[i];
      value = collection[key];
    }
    else
    {
      value = array[key];
    }

    string type = getTypeName(value);

    // Check if this value contains a json string
    if (getType(value) == STRING_VAR)
    {
      mixed temp = jsonDecode(value);

      if (getType(temp) != MIXED_VAR)
      {
        value = temp;
        type  = &quot;json &quot; + getTypeName(temp);
      }
    }

    string treeId = parent + SEPARATOR + key;

    tree.appendItemNC(parent, treeId, key);

    if (getType(value) == MAPPING_VAR &amp;&amp; !mappingHasKey(value, &quot;type&quot;))
    {
      tree.setText(treeId, 2, &quot;structure&quot;);
    }
    else
    {
      tree.setText(treeId, 2, value[&quot;type&quot;]);
    }

    // Add possible child items as subitems
    if ((getType(value) == MAPPING_VAR ||
         substr(getTypeName(value), 0, 4) == &quot;dyn_&quot;) &amp;&amp; !mappingHasKey(value, &quot;type&quot;))
    {
      showJson(tree, value, treeId);

      tree.setOpen(treeId, TRUE);
    }
    else // Show the editable value
    {
      tree.setText(treeId, 1, value);
      tree.setRenameEnabled(treeId, 1, TRUE);
    }

    // Mark invalid langString mappings
    if (getType(value) == MAPPING_VAR &amp;&amp;
        isLangString(value) &amp;&amp;
        !checkLangStringMapping(value))
    {
      tree.setBackColor(treeId, 0, &quot;red&quot;);
    }
  }
}

bool isLangString(const mapping &amp;map)
{
  dyn_string keys = mappingKeys(map);

  bool result = dynlen(keys) == getNoOfLangs();

  if (result)
  {
    for (int i = 0; i &lt; getNoOfLangs() &amp;&amp; result; i++)
    {
      result = dynContains(keys, getLocale(i)) &gt; 0;
    }
  }

  return result;
}

bool checkLangStringMapping(const mapping &amp;map)
{
  bool allEmpty    = TRUE;
  bool allNonEmpty = TRUE;

  // Check if the langstring is OK
  // It is OK if all language have a value OR if all are empty
  for (int i = 1; i &lt;= mappinglen(map) &amp;&amp; (allEmpty || allNonEmpty); i++)
  {
    string value = mappingGetValue(map, i);

    allEmpty    &amp;= value == &quot;&quot;;
    allNonEmpty &amp;= value != &quot;&quot;;
  }

  bool result = allEmpty || allNonEmpty;

  return result;
}

public void clearTree()
{
  TREE.clear();
}

//fucntion to update the mqtt connection drop box
void UpdateMqttConnPanel()
{
  dyn_string dsitems = dpNames(&quot;*&quot;, &quot;_MqttConnection&quot;, false);
  dyn_string dsitemsWithoutSysName;
  string sConnectionName;
  string sAddress;

  for (int i = 1; i &lt;= dynlen(dsitems); i++)
  {
    dsitemsWithoutSysName.append(strltrim(dpSubStr(dsitems[i], DPSUB_DP), &quot;_&quot;));
  }

  mqttConnections_box.items(dsitemsWithoutSysName);
  mqttConnections_box.updatesEnabled(true);

  getValue(&quot;mqttConnections_box&quot;, &quot;text&quot;, sConnectionName);
  dpSet(&quot;MqttBrokerInformation.MqttBrokerConnName&quot;, sConnectionName);

  if (dpExists(&quot;_&quot; + sConnectionName) &amp;&amp; sConnectionName != &quot;&quot;)
  {
    dpGet(&quot;_&quot; + sConnectionName + &quot;.Config.Address&quot;, sAddress);
    mapping mAddress = jsonDecode(sAddress);
    Username_txt.text(mAddress[&quot;Username&quot;]);
    URL_txt.text(mAddress[&quot;ConnectionString&quot;]);
  }
}
]]></script>
  <script isEscaped="1" name="Close"><![CDATA[main()
{
 dpSet(&quot;MqttBrokerInformation.MqttClientConnTrigger&quot;, false);
 PanelOff();
}]]></script>
  <script isEscaped="1" name="Initialize"><![CDATA[main()
{
  dyn_dyn_string xxdepes1;
  dyn_dyn_int xxdepei1;
  string sDP = &quot;MqttBrokerInformation&quot;;

  // Create the data type
  string DptName = &quot;MqttBrokerBrowse&quot;;

  xxdepes1[1] = makeDynString(DptName, &quot;&quot;, &quot;&quot;, &quot;&quot;);
  xxdepes1[2] = makeDynString(&quot;&quot;, &quot;MqttBrokerConnStatus&quot;, &quot;&quot;, &quot;&quot;);
  xxdepes1[3] = makeDynString(&quot;&quot;, &quot;MqttBrokerConnName&quot;, &quot;&quot;, &quot;&quot;);
  xxdepes1[4] = makeDynString(&quot;&quot;, &quot;MqttBrokerConnPassword&quot;, &quot;&quot;, &quot;&quot;);
  xxdepes1[5] = makeDynString(&quot;&quot;, &quot;DiscoveredTopics&quot;, &quot;&quot;, &quot;&quot;);
  xxdepes1[6] = makeDynString(&quot;&quot;, &quot;MqttBrokerSubTopic&quot;, &quot;&quot;, &quot;&quot;);
  xxdepes1[7] = makeDynString(&quot;&quot;, &quot;MqttClientConnTrigger&quot;, &quot;&quot;, &quot;&quot;);

  // Define the data point elements as unsigned integers
  xxdepei1[1] = makeDynInt(DPEL_STRUCT);
  xxdepei1[2] = makeDynInt(0, DPEL_BOOL);
  xxdepei1[3] = makeDynInt(0, DPEL_STRING);
  xxdepei1[4] = makeDynInt(0, DPEL_STRING);
  xxdepei1[5] = makeDynInt(0, DPEL_STRING);
  xxdepei1[6] = makeDynInt(0, DPEL_STRING);
  xxdepei1[7] = makeDynInt(0, DPEL_BOOL);

  // Create the data point type if it doesn't already exists

  if (!dpTypeExists(DptName))
  {
    dpTypeCreate(xxdepes1, xxdepei1);
  }

  // create the DP which contains the info of the broker connection
  if (!dpExists(sDP))
  {
    dpCreate(sDP, DptName);
  }

  UpdateMqttConnPanel();

  string sPassword;
  string sTopicToSubscribe;
  dpGet(&quot;MqttBrokerInformation.MqttBrokerSubTopic&quot;, sTopicToSubscribe, &quot;MqttBrokerInformation.MqttBrokerConnPassword&quot;, sPassword);
  Topic_txt.text(sTopicToSubscribe);
  Password_txt.text(sPassword);
   dpConnect(&quot;WorkCB&quot;,&quot;MqttBrokerInformation.MqttBrokerConnStatus:_lock._corr._locked&quot;,&quot;MqttBrokerInformation.MqttBrokerConnStatus&quot;);

}
void WorkCB(string dpe, bool value, string dpe2, bool value2)
{
  bool bConnStatusToBroker;


 if(value &amp;&amp; value2 )
  {
    ConnStatus.backCol(&quot;green&quot;);
  }
else
 {
    ConnStatus.backCol(&quot;red&quot;);
  }


if(!value &amp;&amp; value2)
  {
    dpSet(&quot;MqttBrokerInformation.MqttBrokerConnStatus&quot;, false );
  }
}
]]></script>
 </events>
 <shapes>
  <shape Name="RECTANGLE1" layerId="0" shapeType="RECTANGLE">
   <properties>
    <prop name="serialId">75</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">7 818</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_Transparent</prop>
    <prop name="BackColor">{51,51,83}</prop>
    <prop name="TabOrder">50</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">False</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="FillType">[solid]</prop>
    <prop name="Geometry">2.559999999999999 0 0 0.07757575757575745 -17.92 956.5430303030305</prop>
    <prop name="BorderStyle">Normal</prop>
    <prop name="Location">7 818</prop>
    <prop name="Size">751 751</prop>
    <prop name="CornerRadius">0</prop>
    <prop name="Transformable">True</prop>
   </properties>
  </shape>
  <shape Name="TO_JSON_STRING" layerId="0" shapeType="PUSH_BUTTON">
   <properties>
    <prop name="serialId">3</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">10 844</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_ButtonText</prop>
    <prop name="BackColor">_Button</prop>
    <prop name="TabOrder">3</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
     <prop name="de_AT.utf8"></prop>
     <prop name="ru_RU.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Arial,-1,13,5,400,0,0,0,0,0,0,0,0,0,0,1</prop>
     <prop name="de_AT.utf8">Arial,-1,13,5,50,0,0,0,0,0</prop>
     <prop name="ru_RU.utf8">Arial,-1,13,5,50,0,0,0,0,0</prop>
    </prop>
    <prop name="Location">23 811</prop>
    <prop name="Size">131 30</prop>
    <prop name="BorderStyle">Styled</prop>
    <prop name="Text">
     <prop name="en_US.utf8">To json string</prop>
     <prop name="de_AT.utf8">To json string</prop>
     <prop name="ru_RU.utf8">To json string</prop>
    </prop>
   </properties>
   <events>
    <script isEscaped="1" name="Clicked"><![CDATA[main(mapping event)
{
  this.enabled = FALSE;
  TREE.updatesEnabled = FALSE;

  anytype settings = getValueFromTree(getShape(&quot;TREE&quot;));

  string sJson = jsonEncode(settings);

  RESULT.text = sJson;

  TREE.updatesEnabled = TRUE;
  this.enabled = TRUE;
}

mixed getValueFromTree(shape tree, string parent = &quot;&quot;, string parentType = &quot;mapping&quot;)
{
  bool bJson = substr(parentType, 0, 5) == &quot;json &quot;;

  if (bJson)
  {
    parentType = substr(parentType, 5);
  }

//  mixed result = parentType == &quot;mapping&quot; ? makeMapping() : makeDynAnytype();
  mixed result = substr(parentType, 0, 4) != &quot;dyn_&quot; ? makeMapping() : makeDynAnytype();

  dyn_string children = tree.children(parent);

  if (dynlen(children) == 0)
  {
    if (parentType == &quot;bool&quot;)
    {
      result = (bool)tree.getText(parent, 1);
    }
    else if (parentType == &quot;float&quot;)
    {
      result = (float)tree.getText(parent, 1);
    }
    else if (substr(parentType, 0, 4) == &quot;dyn_&quot;)
    {
      switch (parentType)
      {
//        case &quot;dyn_string&quot;: result = makeDynString(); break;
        default: result = makeDynAnytype(); break;
      }
    }
    else
    {
      result = tree.getText(parent, 1);
    }

    DebugFN(&quot;TEXT&quot;, &quot;parent: &quot; + parent + &quot; type: &quot; + parentType + &quot; result: &quot; + result + &quot; text: &quot; + tree.getText(parent, 1));
  }

  for (int i = 1; i &lt;= dynlen(children); i++)
  {
    string id = children[i];

    string name = tree.getText(id, 0);
    string type = tree.getText(id, 2);
    anytype value;

    DebugFN(&quot;CHILD&quot;, &quot;id: &quot; + id + &quot; name: &quot; + name + &quot; type: &quot; + type + &quot; dyn: &quot; + (substr(getTypeName(result), 0, 4) == &quot;dyn_&quot;) + &quot; isNumber: &quot; + isNumber(name));

    value = getValueFromTree(tree, id, type);

    result[name] = value;
  }

  if (bJson)
  {
    result = jsonEncode(result);
  }

  DebugFN(&quot;RETURN&quot;, __FUNCTION__ + &quot;(..., &quot; + parent + &quot;, &quot; + parentType + &quot;) Returning type: &quot; + getTypeName(result) + &quot; value: &quot; + result);

  return result;
}

private bool isNumber(string s)
{
  string allowed = &quot;12345678990&quot;;
  for(int i = 0; i &lt; strlen(s); ++i)
    if(strpos(allowed, s[i]) == -1)
      return false;
  return true;
}
]]></script>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{

  this.styleSheet(myStyleButton);
}
]]></script>
   </events>
  </shape>
  <shape Name="RESULT" layerId="0" shapeType="TEXT_FIELD">
   <properties>
    <prop name="serialId">4</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">174.4051938724475 827.8000000000002</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_WindowText</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="HoverBackCol">_Transparent</prop>
    <prop name="TabOrder">4</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
     <prop name="de_AT.utf8"></prop>
     <prop name="ru_RU.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Arial,-1,13,5,700,0,0,0,0,0,0,0,0,0,0,1,Bold</prop>
     <prop name="de_AT.utf8">Arial,-1,13,5,50,0,0,0,0,0</prop>
     <prop name="ru_RU.utf8">Arial,-1,13,5,50,0,0,0,0,0</prop>
    </prop>
    <prop name="Location">190 811</prop>
    <prop name="Size">561 32</prop>
    <prop name="BorderStyle">Normal</prop>
    <prop name="Editable">True</prop>
    <prop name="ClearButtonEnabled">False</prop>
    <prop name="TextFormat">[0s,,,AlignLeft]</prop>
    <prop name="ulcClientSideWidget">False</prop>
   </properties>
   <events>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{
this.styleSheet(myStyleInputField);
}]]></script>
   </events>
  </shape>
  <shape Name="TREE" layerId="0" shapeType="TREE">
   <properties>
    <prop name="serialId">2</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">830.0000000000002 210.0000000000002</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_Window</prop>
    <prop name="BackColor">{0,31,57}</prop>
    <prop name="TabOrder">2</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
     <prop name="de_AT.utf8"></prop>
     <prop name="ru_RU.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,16,5,400,0,0,0,0,0,0,0,0,0,0,1,Roman</prop>
     <prop name="de_AT.utf8">Arial,-1,13,5,50,0,0,0,0,0</prop>
     <prop name="ru_RU.utf8">Arial,-1,13,5,50,0,0,0,0,0</prop>
    </prop>
    <prop name="Location">830.0000000000002 210.0000000000002</prop>
    <prop name="Size">1051 741</prop>
    <extended>
     <prop name="editTriggers" type="ENUM">31</prop>
     <prop name="autoExpandDelay" type="INT">500</prop>
     <prop name="selectionMode" type="ENUM">2</prop>
     <prop name="alternatingRowColors" type="BOOL">False</prop>
     <script isEscaped="1" name="rightClicked"><![CDATA[rightClicked(string id, int column)
{
  int answer;
  dyn_string menu = makeDynString(&quot;PUSH_BUTTON,Delete node,1,1&quot;);

  popupMenu(menu, answer);
  DebugN(&quot;item------&quot;,  this.selectedItems());
  switch (answer)
  {
    case 1: this.removeItem(id); break;
  }
}
]]></script>
    </extended>
   </properties>
   <events>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{
  TREE.addColumn(&quot;MQTT Topics&quot;);
  TREE.addColumn(&quot;VALUE&quot;);

  TREE.addColumn(&quot;TYPE&quot;);
 TREE.hideColumn(1);
 TREE.collapseAll();
}]]></script>
   </events>
  </shape>
  <shape Name="FRAME3" layerId="0" shapeType="FRAME">
   <properties>
    <prop name="serialId">17</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">10 109</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">WF_RefDiffLineLight</prop>
    <prop name="BackColor">{0,0,0}</prop>
    <prop name="TabOrder">16</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">True</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="FillType">[outline]</prop>
    <prop name="Geometry">0.8567926455566856 0 0 3.943661971830985 1.432073544433145 -79.85915492957739</prop>
    <prop name="BorderStyle">3D</prop>
    <prop name="Text">
     <prop name="en_US.utf8">Subscription</prop>
    </prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,19,5,700,0,0,0,0,0,0,0,0,0,0,1,Bold</prop>
    </prop>
    <prop name="Location">10 109</prop>
    <prop name="Size">891 72</prop>
   </properties>
  </shape>
  <shape Name="Topic_txt" layerId="0" shapeType="TEXT_FIELD">
   <properties>
    <prop name="serialId">18</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">19.57874164669834 393.9545454545455</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_WindowText</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="HoverBackCol">_Transparent</prop>
    <prop name="TabOrder">17</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8">Please enter your topic</prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Tahoma,-1,15,5,700,0,0,0,0,0,0,0,0,0,0,1,Bold</prop>
    </prop>
    <prop name="Location">23 491</prop>
    <prop name="Size">734 32</prop>
    <prop name="BorderStyle">Normal</prop>
    <prop name="Editable">True</prop>
    <prop name="ClearButtonEnabled">False</prop>
    <prop name="TextFormat">[0s,,,AlignLeft]</prop>
    <prop name="ulcClientSideWidget">False</prop>
   </properties>
   <events>
    <script isEscaped="1" name="TextChanged"><![CDATA[main(string newText)
{
  if(newText !=&quot;&quot;)
  Topic_txt.styleSheet(myStyleInputField);
}]]></script>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{
 this.styleSheet(myStyleInputField);
}]]></script>
   </events>
  </shape>
  <shape Name="PRIMITIVE_TEXT4" layerId="0" shapeType="PRIMITIVE_TEXT">
   <properties>
    <prop name="serialId">19</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">25.51216744420178 467.6795454545454</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">lightgrey</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="TabOrder">18</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">False</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="FillType">[outline]</prop>
    <prop name="Location">25.51216744420178 467.6795454545454</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,16,5,400,0,0,0,0,0,0,0,0,0,0,1,Roman</prop>
    </prop>
    <prop name="Text">
     <prop name="en_US.utf8">Subscription Topic</prop>
    </prop>
    <prop name="Distance">2</prop>
    <prop name="BorderOffset">2</prop>
    <prop name="Bordered">False</prop>
    <prop name="Fit">True</prop>
    <prop name="Transformable">False</prop>
    <prop name="TextFormat">[0s,,,AlignLeft]</prop>
   </properties>
  </shape>
  <shape Name="Import_btn" layerId="0" shapeType="PUSH_BUTTON">
   <properties>
    <prop name="serialId">21</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">365 635.0332604385387</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_ButtonText</prop>
    <prop name="BackColor">_Button</prop>
    <prop name="TabOrder">20</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Arial,-1,13,5,400,0,0,0,0,0,0,0,0,0,0,1,Regular</prop>
    </prop>
    <prop name="Location">354.1625664511493 734.9667395614614</prop>
    <prop name="Size">131 32</prop>
    <prop name="BorderStyle">Styled</prop>
    <prop name="Text">
     <prop name="en_US.utf8">Import</prop>
    </prop>
   </properties>
   <events>
    <script isEscaped="1" name="Clicked"><![CDATA[#uses &quot;ImportMqttTopicsAndCreateCNS.ctl&quot;
main(mapping event)
{
  anytype atData;
  dyn_dyn_anytype ddaQRes;
  string sConnection;
  bool bConnectionStatus;

  dpGet(&quot;MqttBrokerInformation.MqttBrokerConnStatus&quot;, bConnectionStatus);

  //lock the import button until the import is done!
  Import_btn.enabled(false);

  getValue(&quot;mqttConnections_box&quot;, &quot;selectedText&quot;, sConnection);

  if (sConnection != &quot;&quot; &amp;&amp; bConnectionStatus )
  {
    MqttTopicsImporterAndCNScreator(atData, ddaQRes, sConnection);
  }

  //unlock the import button
  Import_btn.enabled(true);
}]]></script>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{
  this.styleSheet(myStyleButton);
}
]]></script>
   </events>
  </shape>
  <shape Name="mqttConnections_box" layerId="0" shapeType="COMBO_BOX">
   <properties>
    <prop name="serialId">23</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">103.5 211</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_WindowText</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="TabOrder">21</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="AcceptDrops">True</prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">MS Shell Dlg 2,-1,14,5,400,0,0,0,0,0,0,0,0,0,0,1</prop>
    </prop>
    <prop name="Location">20 241</prop>
    <prop name="Size">335 30</prop>
    <prop name="Listitems"/>
    <prop name="Editable">False</prop>
   </properties>
   <events>
    <script isEscaped="1" name="Changed"><![CDATA[main()
{
  UpdateMqttConnPanel();
  dpSet(&quot;MqttBrokerInformation.MqttClientConnTrigger&quot;, false);
  ConnectionSwitch.checked(false);
  TREE.clear();
}]]></script>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{
  string myStyle =
    &quot;QComboBox {&quot;
    &quot;  background-color: #001F39;&quot;
    &quot;  color: #FFF;&quot;
    &quot;  border: 1px solid #FFF;&quot;
    &quot;  border-radius: 0px;&quot;
    &quot;  padding: 6px 12px;&quot;
    &quot;  font-size: 14px;&quot;
    &quot;  font-weight: 500;&quot;
    &quot;}&quot;
    &quot;QComboBox:hover {&quot;
    &quot;  border-color: #00FFB9;&quot;
    &quot;}&quot;
    &quot;QComboBox:focus {&quot;
    &quot;  background-color: #16565C;&quot;
    &quot;  border-color: #00FFB9;&quot;
    &quot;}&quot;
    &quot;QComboBox QAbstractItemView {&quot;
    &quot;  background-color: #001F39;&quot;
    &quot;  color: #FFF;&quot;
    &quot;  selection-background-color: #16565C;&quot;
    &quot;  selection-color: #00FFB9;&quot;
    &quot;}&quot;
    &quot;QComboBox::drop-down {&quot;
    &quot;  border: none;&quot;
    &quot;  background-color: #00FFB9;&quot;
    &quot;}&quot;;
  this.styleSheet(myStyle);
}]]></script>
   </events>
  </shape>
  <shape Name="PRIMITIVE_TEXT6" layerId="0" shapeType="PRIMITIVE_TEXT">
   <properties>
    <prop name="serialId">25</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">24.929937304075 204.3110795454543</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">lightgrey</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="TabOrder">23</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">False</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="FillType">[outline]</prop>
    <prop name="Geometry">1.20235218557408 0 0 1 -7.974564603779364 10</prop>
    <prop name="Location">24.929937304075 204.3110795454543</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Noto Sans,-1,16,5,400,0,0,0,0,0,0,0,0,0,0,1,Regular</prop>
    </prop>
    <prop name="Text">
     <prop name="en_US.utf8">Connection</prop>
    </prop>
    <prop name="Distance">2</prop>
    <prop name="BorderOffset">2</prop>
    <prop name="Bordered">False</prop>
    <prop name="Fit">True</prop>
    <prop name="Transformable">False</prop>
    <prop name="TextFormat">[0s,,,AlignLeft]</prop>
   </properties>
  </shape>
  <shape Name="FRAME4" layerId="0" shapeType="FRAME">
   <properties>
    <prop name="serialId">26</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">10 109</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">WF_RefDiffLineLight</prop>
    <prop name="BackColor">{0,0,0}</prop>
    <prop name="TabOrder">24</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">True</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">True</prop>
    <prop name="FillType">[outline]</prop>
    <prop name="Geometry">0.8584269662921298 0 0 1.957746478873239 -2.584269662916977 -42.39436619718306</prop>
    <prop name="BorderStyle">Normal</prop>
    <prop name="Text">
     <prop name="en_US.utf8">MQTT Connection</prop>
    </prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,19,5,700,0,0,0,0,0,0,0,0,0,0,1,Bold</prop>
    </prop>
    <prop name="Location">10 109</prop>
    <prop name="Size">891 72</prop>
   </properties>
  </shape>
  <shape Name="Configuration_btn" layerId="0" shapeType="PUSH_BUTTON">
   <properties>
    <prop name="serialId">27</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">439 206.814453125</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_ButtonText</prop>
    <prop name="BackColor">_Button</prop>
    <prop name="HoverBackCol">{0,255,185}</prop>
    <prop name="TabOrder">25</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Arial,-1,13,5,400,0,0,0,0,0,0,0,0,0,0,1,Regular</prop>
    </prop>
    <prop name="Location">395 241</prop>
    <prop name="Size">131 32</prop>
    <prop name="BorderStyle">Styled</prop>
    <prop name="Text">
     <prop name="en_US.utf8">Configure</prop>
    </prop>
   </properties>
   <events>
    <script isEscaped="1" name="Clicked"><![CDATA[main(mapping event)
{
dyn_float dfResult;
dyn_string dsResult;
  string strvar = &quot;Beispiel&quot;;
  string sQuery = &quot;SELECT '_original.._value' FROM '_*.Config.Address:'&quot;;

  ChildPanelOnReturn(&quot;/para/mqtt.pnl&quot;, &quot;MQTT&quot;, makeDynString(&quot;abc&quot;,strvar),0,0,dfResult,dsResult);
   UpdateMqttConnPanel();

}

]]></script>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{
  this.styleSheet(myStyleButton);
}
]]></script>
   </events>
  </shape>
  <shape Name="remove_connection" layerId="0" shapeType="PUSH_BUTTON">
   <properties>
    <prop name="serialId">29</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">604 206.7470703125</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_ButtonText</prop>
    <prop name="BackColor">_Button</prop>
    <prop name="TabOrder">26</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Arial,-1,13,5,400,0,0,0,0,0,0,0,0,0,0,1,Regular</prop>
    </prop>
    <prop name="Location">563 241</prop>
    <prop name="Size">131 32</prop>
    <prop name="BorderStyle">Styled</prop>
    <prop name="Text">
     <prop name="en_US.utf8">Remove</prop>
    </prop>
   </properties>
   <events>
    <script isEscaped="1" name="Clicked"><![CDATA[main(mapping event)
{
  string sSelection;
    string sPath = getPath(SOURCE_REL_PATH);
  //get the selected mqtt connection
  getValue(&quot;mqttConnections_box&quot;, &quot;selectedText&quot;, sSelection);

  // check if the DP exists and delete it
  if (dpExists(&quot;_&quot; + sSelection) &amp;&amp; sSelection != &quot;&quot;)
  {
    dpDelete(&quot;_&quot; + sSelection);

    if (dpExists(&quot;_&quot; + sSelection + &quot;_2&quot;))
    {
      dpDelete(&quot;_&quot; + sSelection);
    }
  }

  Password_txt.text(&quot;&quot;);
  Topic_txt.text(&quot;&quot;);
  Username_txt.text(&quot;&quot;);
  URL_txt.text(&quot;&quot;);


  // disconnect the mqtt client after deleting the connection
  dpSet(&quot;MqttBrokerInformation.MqttClientConnTrigger&quot;, false);

  // update the panel
  UpdateMqttConnPanel();


}]]></script>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{

  this.styleSheet(myStyleButton);
}
]]></script>
   </events>
  </shape>
  <shape Name="Username_txt" layerId="0" shapeType="TEXT_FIELD">
   <properties>
    <prop name="serialId">30</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">19.73298701298276 447.9545454545455</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_WindowText</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="HoverBackCol">_Transparent</prop>
    <prop name="TabOrder">27</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Tahoma,-1,15,5,700,0,0,0,0,0,0,0,0,0,0,1,Bold</prop>
    </prop>
    <prop name="Location">23 565</prop>
    <prop name="Size">332 32</prop>
    <prop name="BorderStyle">Normal</prop>
    <prop name="Editable">True</prop>
    <prop name="ClearButtonEnabled">False</prop>
    <prop name="TextFormat">[0s,,,AlignLeft]</prop>
    <prop name="ulcClientSideWidget">False</prop>
   </properties>
   <events>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{
this.styleSheet(myStyleInputField);
}]]></script>
   </events>
  </shape>
  <shape Name="PRIMITIVE_TEXT7" layerId="0" shapeType="PRIMITIVE_TEXT">
   <properties>
    <prop name="serialId">31</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">25.54545454545007 543.9545454545455</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">lightgrey</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="TabOrder">28</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">False</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="FillType">[outline]</prop>
    <prop name="Location">25.54545454545007 543.9545454545455</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,16,5,400,0,0,0,0,0,0,0,0,0,0,1,Roman</prop>
    </prop>
    <prop name="Text">
     <prop name="en_US.utf8">Username</prop>
    </prop>
    <prop name="Distance">2</prop>
    <prop name="BorderOffset">2</prop>
    <prop name="Bordered">False</prop>
    <prop name="Fit">True</prop>
    <prop name="Transformable">False</prop>
    <prop name="TextFormat">[0s,,,AlignLeft]</prop>
   </properties>
  </shape>
  <shape Name="Password_txt" layerId="0" shapeType="TEXT_FIELD">
   <properties>
    <prop name="serialId">32</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">393.75636667915 447.9545454545455</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_WindowText</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="HoverBackCol">_Transparent</prop>
    <prop name="TabOrder">29</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Tahoma,-1,15,5,700,0,0,0,0,0,0,0,0,0,0,1,Bold</prop>
    </prop>
    <prop name="Location">391 565</prop>
    <prop name="Size">365 32</prop>
    <prop name="BorderStyle">Normal</prop>
    <prop name="Editable">True</prop>
    <prop name="ClearButtonEnabled">False</prop>
    <prop name="TextFormat">[0S,,,AlignLeft]</prop>
    <prop name="ulcClientSideWidget">False</prop>
   </properties>
   <events>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{
this.styleSheet(myStyleInputField);
}]]></script>
   </events>
  </shape>
  <shape Name="PRIMITIVE_TEXT8" layerId="0" shapeType="PRIMITIVE_TEXT">
   <properties>
    <prop name="serialId">33</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">393.3393026941181 393.75</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">lightgrey</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="TabOrder">30</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">False</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="FillType">[outline]</prop>
    <prop name="Geometry">1.384615384615384 0 0 1 -143.7388926445952 149.9545454545455</prop>
    <prop name="Location">393.3393026941181 393.75</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,16,5,400,0,0,0,0,0,0,0,0,0,0,1,Roman</prop>
    </prop>
    <prop name="Text">
     <prop name="en_US.utf8">Password</prop>
    </prop>
    <prop name="Distance">2</prop>
    <prop name="BorderOffset">2</prop>
    <prop name="Bordered">False</prop>
    <prop name="Fit">True</prop>
    <prop name="Transformable">False</prop>
    <prop name="TextFormat">[0s,,,AlignLeft]</prop>
   </properties>
  </shape>
  <shape Name="URL_txt" layerId="0" shapeType="TEXT_FIELD">
   <properties>
    <prop name="serialId">35</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">19.58156565656117 333.9545454545455</prop>
    <prop name="Enable">False</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_WindowText</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="HoverBackCol">_Transparent</prop>
    <prop name="TabOrder">31</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Tahoma,-1,15,5,400,0,0,0,0,0,0,0,0,0,0,1,Regular</prop>
    </prop>
    <prop name="Location">23 413</prop>
    <prop name="Size">734 32</prop>
    <prop name="BorderStyle">Normal</prop>
    <prop name="Editable">True</prop>
    <prop name="ClearButtonEnabled">False</prop>
    <prop name="TextFormat">[0s,,,AlignLeft]</prop>
    <prop name="ulcClientSideWidget">False</prop>
   </properties>
   <events>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{
 this.styleSheet(myStyleInputField);
}]]></script>
   </events>
  </shape>
  <shape Name="PRIMITIVE_TEXT9" layerId="0" shapeType="PRIMITIVE_TEXT">
   <properties>
    <prop name="serialId">36</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">24.36363636362753 390.3636363636364</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">lightgrey</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="TabOrder">32</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">False</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="FillType">[outline]</prop>
    <prop name="Location">24.36363636362753 390.3636363636364</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,16,5,400,0,0,0,0,0,0,0,0,0,0,1,Roman</prop>
    </prop>
    <prop name="Text">
     <prop name="en_US.utf8">Server URL</prop>
    </prop>
    <prop name="Distance">2</prop>
    <prop name="BorderOffset">2</prop>
    <prop name="Bordered">False</prop>
    <prop name="Fit">True</prop>
    <prop name="Transformable">False</prop>
    <prop name="TextFormat">[0s,,,AlignLeft]</prop>
   </properties>
  </shape>
  <shape Name="info" layerId="0" shapeType="Label">
   <properties>
    <prop name="serialId">37</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">10 52.26708011531687</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">lightgrey</prop>
    <prop name="BackColor">{0,0,40}</prop>
    <prop name="TabOrder">33</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
     <prop name="de_AT.utf8"></prop>
     <prop name="ru_RU.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,19,5,400,0,0,0,0,0,0,0,0,0,0,1,Roman</prop>
     <prop name="de_AT.utf8">Arial,-1,13,5,400,0,0,0,0,0,0,0,0,0,0,1,Standard</prop>
     <prop name="ru_RU.utf8">Arial,-1,13,5,400,0,0,0,0,0,0,0,0,0,0,1,Standard</prop>
    </prop>
    <prop name="Location">7.134900596884285 51.46635154622656</prop>
    <prop name="Size">1922 79</prop>
    <extended>
     <prop name="frameShape" type="ENUM">0</prop>
     <prop name="text" type="CHAR_STRING"></prop>
     <prop name="styleSheet" type="CHAR_STRING"></prop>
    </extended>
   </properties>
   <events>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{
  string sDescription;

  sDescription = &quot;  This panel facilitates seamless integration with brokers, allowing users to subscribe to specific topics &quot;
                 &quot;and explore available topics within the broker. Users can import the entire UNS structure or individual topics\n&quot;
                 &quot;  into their system either manually, by clicking on Import, or automatically, the panel dynamically &quot;
                 &quot;detects and imports new topics as they appear in the broker&quot;;

  this.text = sDescription;
  this.styleSheet(&quot;margin-top: 5px; margin-left: 15px; margin-right: 15px; margin-bottom: 5px; border-bottom: 1px black;&quot;);
}
]]></script>
   </events>
  </shape>
  <shape Name="header" layerId="0" shapeType="Label">
   <properties>
    <prop name="serialId">38</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">0 -8.989045491330252</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">WF_RefDiffLineLight</prop>
    <prop name="BackColor">{0,0,40}</prop>
    <prop name="TabOrder">34</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
     <prop name="de_AT.utf8"></prop>
     <prop name="ru_RU.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,32,5,700,0,0,0,0,0,0,0,0,0,0,1,Bold</prop>
     <prop name="de_AT.utf8">Arial,-1,13,5,400,0,0,0,0,0,0,0,0,0,0,1,Standard</prop>
     <prop name="ru_RU.utf8">Arial,-1,13,5,400,0,0,0,0,0,0,0,0,0,0,1,Standard</prop>
    </prop>
    <prop name="Location">-3.042238295256181 -10</prop>
    <prop name="Size">1921 81</prop>
    <extended>
     <prop name="frameShape" type="ENUM">0</prop>
     <prop name="text" type="CHAR_STRING"></prop>
     <prop name="styleSheet" type="CHAR_STRING"></prop>
    </extended>
   </properties>
   <events>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{
  string sHeader;

  sHeader = &quot;  MQTT Explorer and Importer&quot;;
  this.text = sHeader;
  this.styleSheet(&quot;margin-top: 15px; margin-left: 15px; margin-right: 15px; margin-bottom: 5px; border-bottom: 1px black;&quot;);
}
]]></script>
   </events>
  </shape>
  <shape Name="PUSH_BUTTON1" layerId="0" shapeType="PUSH_BUTTON">
   <properties>
    <prop name="serialId">41</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">152.0966491059601 635.6024283697939</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_ButtonText</prop>
    <prop name="BackColor">_Button</prop>
    <prop name="TabOrder">36</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Arial,-1,13,5,400,0,0,0,0,0,0,0,0,0,0,1,Regular</prop>
    </prop>
    <prop name="Location">188.9108588760752 734.9667395614614</prop>
    <prop name="Size">131 32</prop>
    <prop name="BorderStyle">Styled</prop>
    <prop name="Text">
     <prop name="en_US.utf8">Refresh</prop>
    </prop>
   </properties>
   <events>
    <script isEscaped="1" name="Clicked"><![CDATA[main()
{
  string sDiscoveredTopics;

  dpGet(&quot;MqttBrokerInformation.DiscoveredTopics:_original.._value&quot;, sDiscoveredTopics);
  clearTree();
  loadJson(sDiscoveredTopics);
//   TREE.collapseAll();
}
]]></script>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{

  this.styleSheet(myStyleButton);
}
]]></script>
   </events>
  </shape>
  <shape Name="Connect_to_broker_txt" layerId="0" shapeType="PRIMITIVE_TEXT">
   <properties>
    <prop name="serialId">50</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">22.94869646253738 704.2775853775701</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">lightgrey</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="TabOrder">42</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">False</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="FillType">[outline]</prop>
    <prop name="Location">22.94869646253738 704.2775853775701</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,16,5,400,0,0,0,0,0,0,0,0,0,0,1,Roman</prop>
    </prop>
    <prop name="Text">
     <prop name="en_US.utf8">Establich connection</prop>
    </prop>
    <prop name="Distance">2</prop>
    <prop name="BorderOffset">2</prop>
    <prop name="Bordered">False</prop>
    <prop name="Fit">True</prop>
    <prop name="Transformable">False</prop>
    <prop name="TextFormat">[0s,,,AlignLeft]</prop>
   </properties>
  </shape>
  <shape Name="PRIMITIVE_TEXT12" layerId="0" shapeType="PRIMITIVE_TEXT">
   <properties>
    <prop name="serialId">59</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">188.5066666666667 511</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">lightgrey</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="TabOrder">44</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">False</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="FillType">[outline]</prop>
    <prop name="Geometry">1.242456896551725 0 0 1 -198.2454793549384 425</prop>
    <prop name="Location">188.5066666666667 511</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,16,5,400,0,0,0,0,0,0,0,0,0,0,1,Roman</prop>
    </prop>
    <prop name="Text">
     <prop name="en_US.utf8">Connection Status:</prop>
    </prop>
    <prop name="Distance">2</prop>
    <prop name="BorderOffset">2</prop>
    <prop name="Bordered">False</prop>
    <prop name="Fit">True</prop>
    <prop name="Transformable">False</prop>
    <prop name="TextFormat">[0s,,,AlignLeft]</prop>
   </properties>
  </shape>
  <shape Name="CHECK_BOX1" layerId="0" shapeType="CHECK_BOX">
   <properties>
    <prop name="serialId">60</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">518.7632874297303 725.4205187492777</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">WF_RefDiffLineLight</prop>
    <prop name="BackColor">_3DFace</prop>
    <prop name="TabOrder">45</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Arial,-1,16,5,400,0,0,0,0,0,0,0,0,0,0,1,Regular</prop>
    </prop>
    <prop name="Location">518.7632874297303 725.4205187492777</prop>
    <prop name="Size">222 52</prop>
    <prop name="ShowBackground">False</prop>
    <prop name="Listitems">
     <prop name="Item">
      <prop name="Text">
       <prop name="en_US.utf8">Automatic update and Import</prop>
      </prop>
      <prop name="Select">False</prop>
     </prop>
    </prop>
   </properties>
   <events>
    <script isEscaped="1" name="Clicked"><![CDATA[#uses &quot;ImportMqttTopicsAndCreateCNS.ctl&quot;
main(int button, int state)
{
    Import_btn.enabled(!state);
if(state)

    {
      dpConnect(&quot;WorkCB&quot;,&quot;MqttBrokerInformation.DiscoveredTopics&quot; );
    }
    else
    {
      dpDisconnect(&quot;WorkCB&quot;,&quot;MqttBrokerInformation.DiscoveredTopics&quot; );
    }
}

void WorkCB(string dpe, float value)
{
  anytype atData;
  dyn_dyn_anytype ddaQRes;
  string sConnection;
  bool bConnectionStatus;


  dpGet(&quot;MqttBrokerInformation.MqttBrokerConnStatus&quot;, bConnectionStatus);
  getValue(&quot;mqttConnections_box&quot;,&quot;selectedText&quot;, sConnection);

  if (sConnection != &quot;&quot; &amp;&amp; bConnectionStatus )
  {
    MqttTopicsImporterAndCNScreator(atData, ddaQRes, sConnection);
  }
}]]></script>
   </events>
  </shape>
  <shape Name="cmdClose" layerId="0" shapeType="PUSH_BUTTON">
   <properties>
    <prop name="serialId">79</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">598.5714285714286 739.5909090909089</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_ButtonText</prop>
    <prop name="BackColor">_Button</prop>
    <prop name="TabOrder">54</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8">Accept changes and close panel</prop>
     <prop name="de_AT.utf8">nderungen bernehmen und Panel schlieen</prop>
     <prop name="ru_RU.utf8">    </prop>
    </prop>
    <prop name="Hotkey">Enter</prop>
    <prop name="layoutAlignment">AlignCenter</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Arial,-1,13,5,400,0,0,0,0,0,0,0,0,0,0,1</prop>
     <prop name="de_AT.utf8">Arial,-1,13,5,50,0,0,0,0,0</prop>
     <prop name="ru_RU.utf8">Arial,-1,13,5,50,0,0,0,0,0</prop>
    </prop>
    <prop name="Location">1756.571428571428 1033.590909090909</prop>
    <prop name="Size">131 32</prop>
    <prop name="BorderStyle">Normal</prop>
    <prop name="Text">
     <prop name="en_US.utf8">Close</prop>
     <prop name="de_AT.utf8">OK</prop>
     <prop name="ru_RU.utf8">OK</prop>
    </prop>
   </properties>
   <events>
    <script isEscaped="1" name="Clicked"><![CDATA[main()
{
  dyn_anytype da, daa;

  da[1] = myModuleName();
  da[2] = myPanelName();
  daa[1] = 0.0;
  da[3] = daa;

  if ( isEvConnOpen() )
  {
      dpSet(&quot;MqttBrokerInformation.MqttClientConnTrigger&quot;, false);
    PanelOff();
  }
  else
    panelOff(da);
}


]]></script>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{

  this.styleSheet(myStyleButton);
}]]></script>
   </events>
  </shape>
  <shape Name="FRAME5" layerId="0" shapeType="FRAME">
   <properties>
    <prop name="serialId">81</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">10 109</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">WF_RefDiffLineLight</prop>
    <prop name="BackColor">{0,0,0}</prop>
    <prop name="TabOrder">56</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">True</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="FillType">[outline]</prop>
    <prop name="Geometry">0.8584269662921251 0 0 2.775928297055034 1.665730337087496 364.3329065300938</prop>
    <prop name="BorderStyle">3D</prop>
    <prop name="Text">
     <prop name="en_US.utf8">Commands</prop>
    </prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,19,5,700,0,0,0,0,0,0,0,0,0,0,1,Bold</prop>
    </prop>
    <prop name="Location">10 109</prop>
    <prop name="Size">891 72</prop>
   </properties>
  </shape>
  <shape Name="FRAME6" layerId="0" shapeType="FRAME">
   <properties>
    <prop name="serialId">82</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">10 109</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">WF_RefDiffLineLight</prop>
    <prop name="BackColor">{0,0,0}</prop>
    <prop name="TabOrder">57</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">True</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="FillType">[outline]</prop>
    <prop name="Geometry">1.247191011235955 0 0 11.40845070422536 787.5280898876405 -1073.521126760564</prop>
    <prop name="BorderStyle">3D</prop>
    <prop name="Text">
     <prop name="en_US.utf8">Discovered Topics</prop>
    </prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,19,5,700,0,0,0,0,0,0,0,0,0,0,1,Bold</prop>
    </prop>
    <prop name="Location">10 109</prop>
    <prop name="Size">891 72</prop>
   </properties>
  </shape>
  <shape Name="LINE1" layerId="0" shapeType="LINE">
   <properties>
    <prop name="serialId">86</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">-20 140</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">{0,255,185}</prop>
    <prop name="BackColor">{255,255,255}</prop>
    <prop name="TabOrder">59</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">True</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,5]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="Start">-20 140</prop>
    <prop name="End">1911 140</prop>
   </properties>
  </shape>
  <shape Name="connecting_ewo" layerId="0" shapeType="GENERIC">
   <properties>
    <prop name="serialId">90</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">160.1480481221216 738.671955499394</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_3DText</prop>
    <prop name="BackColor">_3DFace</prop>
    <prop name="TabOrder">62</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">MS Shell Dlg 2,-1,14,5,400,0,0,0,0,0,0,0,0,0,0,1</prop>
    </prop>
    <prop name="Location">160.1480481221216 738.671955499394</prop>
    <prop name="Size">25 24</prop>
    <prop name="ObjectType">AttentionEffect.ewo</prop>
    <extended>
     <prop name="effectType" type="ENUM">2</prop>
     <script isEscaped="1" name="clicked"><![CDATA[clicked()
{
//   this.stop();
  this.
  this.visible(true);
  this.color1(&quot;green&quot;);

    }]]></script>
    </extended>
   </properties>
   <events>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{
//  time t;
//   dyn_string dpNamesSet;
//   dyn_string dpNamesWait, dpNamesReturn;
//   dyn_anytype conditions, returnValues, dpValuesSet;
//   int status;
//
//   dpNamesSet = makeDynString(&quot;MqttBrokerInformation.MqttClientConnTrigger&quot;);
  // assignment of the data points for dpNamesWait
//   dpNamesWait = makeDynString(&quot;MqttBrokerInformation.MqttBrokerConnStatus:_original.._value&quot;);
  // indication of the condition that must be fulfilled
//   dpValuesSet[1]= true;
//   conditions[1] = true;
//   dpNamesReturn = makeDynString(&quot;MqttBrokerInformation.MqttBrokerConnStatus:_original.._value&quot; );
  // timeout
//   t = 5;
  // The function is called
//   status = dpSetAndWaitForValue(dpNamesSet, dpValuesSet, dpNamesWait, conditions, dpNamesReturn,returnValues,t);
//
//   connecting_ewo.stop();

}
]]></script>
   </events>
  </shape>
  <shape Name="EstablishConnection_btn" layerId="0" shapeType="PUSH_BUTTON">
   <properties>
    <prop name="serialId">91</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">619 209.7470703125</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_ButtonText</prop>
    <prop name="BackColor">_Button</prop>
    <prop name="TabOrder">63</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Arial,-1,13,5,400,0,0,0,0,0,0,0,0,0,0,1,Regular</prop>
    </prop>
    <prop name="Location">23 736</prop>
    <prop name="Size">131 32</prop>
    <prop name="BorderStyle">Styled</prop>
    <prop name="Text">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="IsToggle">True</prop>
   </properties>
   <events>
    <script isEscaped="1" name="Clicked"><![CDATA[main(mapping event)
{
  bool toggle;
  string myStyle;

  getValue(&quot;&quot;, &quot;toggleState&quot;, toggle);

  //Reset the Discovered topics before initiating a new connection to the broker
  dpSet(&quot;System1:MqttBrokerInformation.DiscoveredTopics&quot;, &quot;&quot;);

  if (toggle)
  {
    this.text(&quot;Disconnect&quot;);
    threadID = startThread(&quot;startAconnection&quot;);
  }
  else
  {
    this.text(&quot;Connect&quot;);
    connecting_ewo.stop();
    dpSet(&quot;MqttBrokerInformation.MqttClientConnTrigger&quot;, false);

        status.text(&quot;Disconnected&quot;);
     myStyle =
    &quot;QPushButton {&quot;
    &quot;  background-color: #FF4259;&quot;       //
    &quot;  color: #000028;&quot;                  //
    &quot;  border: 1px solid #FF1431;&quot;       //
    &quot;  border-radius: 16px;&quot;              //
    &quot;  padding: 6px 12px;&quot;
    &quot;  font-size: 14px;&quot;
    &quot;  font-weight: 500;&quot;
    &quot;  min-width: 80px;&quot;
    &quot;}&quot;
;
   status.styleSheet(myStyle);

    synchronized(threadID)
    {
      if (threadID &gt; -1)
      {
        stopThread(threadID);
      }
    }
  }

}

void startAconnection()
{
  time t;
  dyn_string dpNamesSet;
  dyn_string dpNamesWait, dpNamesReturn;
  dyn_anytype conditions, returnValues, dpValuesSet;
  string sDiscoveredTopics;
  string myStyle;

  bool bConnectionStatus;
  connecting_ewo.start();
  status.text(&quot;Connecting..&quot;);

// &quot;MqttBrokerInformation.MqttBrokerConnStatus:_original.._value&quot;,
  dpGet(&quot;MqttBrokerInformation.DiscoveredTopics:_original.._value&quot;, sDiscoveredTopics);

  dpNamesSet = makeDynString(&quot;MqttBrokerInformation.MqttClientConnTrigger&quot;);
  // assignment of the data points for dpNamesWait
  dpNamesWait = makeDynString(&quot;MqttBrokerInformation.DiscoveredTopics:_original.._value&quot;);
  // indication of the condition that must be fulfilled
  dpValuesSet[1] = true;

//  conditions[1] = &quot;Please register for the WinCC OA community to enjoy benefits like networking, exclusive event invitations, and more. Register by the end of May to enter a prize draw for 10 hours of expert services.test&quot;;
  dpNamesReturn = makeDynString(&quot;MqttBrokerInformation.DiscoveredTopics:_original.._value&quot;);
  // timeout
  t = 5;
  // The function is called
  dpSetAndWaitForValue(dpNamesSet, dpValuesSet, dpNamesWait, conditions, dpNamesReturn, returnValues, t);


  connecting_ewo.stop();
  dpGet(&quot;MqttBrokerInformation.MqttBrokerConnStatus:_original.._value&quot;, bConnectionStatus);

  if (bConnectionStatus)
  {
    status.text(&quot;Connected&quot;);
    myStyle =
    &quot;QPushButton {&quot;
    &quot;  background-color: #00FFB9;&quot;       //
    &quot;  color: #000028;&quot;                  //
    &quot;  border: 1px solid #00FFB9;&quot;       //
    &quot;  border-radius: 16px;&quot;              //
    &quot;  padding: 6px 12px;&quot;
    &quot;  font-size: 14px;&quot;
    &quot;  font-weight: 500;&quot;
    &quot;  min-width: 80px;&quot;
    &quot;}&quot;
;
   status.styleSheet(myStyle);
  }
  else
  {
    status.text(&quot;Disconnected&quot;);
     myStyle =
    &quot;QPushButton {&quot;
    &quot;  background-color: #FF4259;&quot;       //
    &quot;  color: #000028;&quot;                  //
    &quot;  border: 1px solid #FF1431;&quot;       //
    &quot;  border-radius: 16px;&quot;              //
    &quot;  padding: 6px 12px;&quot;
    &quot;  font-size: 14px;&quot;
    &quot;  font-weight: 500;&quot;
    &quot;  min-width: 80px;&quot;
    &quot;}&quot;
;
   status.styleSheet(myStyle);
  }

  dpGet(&quot;MqttBrokerInformation.DiscoveredTopics:_original.._value&quot;, sDiscoveredTopics);
  clearTree();
  loadJson(sDiscoveredTopics);

  synchronized(threadID)
  {
    threadID = -1;
  }
}]]></script>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{

  bool bStatus;

  dpGet(&quot;MqttBrokerInformation.MqttClientConnTrigger&quot;, bStatus);
  if(bStatus )
  {
  this.text(&quot;Disconnect&quot;);
  this.toggleState(true);

  }
  else
  {
   this.text(&quot;Connect&quot;);
  }

  this.styleSheet(myStyleButton);
}
]]></script>
   </events>
  </shape>
  <shape Name="status" layerId="0" shapeType="PUSH_BUTTON">
   <properties>
    <prop name="serialId">97</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">204.3105551278205 900.6173078548218</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">_ButtonText</prop>
    <prop name="BackColor">_Button</prop>
    <prop name="TabOrder">69</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Arial,-1,13,5,400,0,0,0,0,0,0,0,0,0,0,1,Regular</prop>
    </prop>
    <prop name="Location">189 931</prop>
    <prop name="Size">131 30</prop>
    <prop name="BorderStyle">Styled</prop>
    <prop name="Text">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="IsToggle">True</prop>
   </properties>
   <events>
    <script isEscaped="1" name="Initialize"><![CDATA[main()
{
   string myStyle =
    &quot;QPushButton {&quot;
    &quot;  background-color: #FF7687;&quot;       // Light gray background
    &quot;  color: #00FFB9;&quot;                  // Dark text
    &quot;  border: 1px solid #00FFB9;&quot;       // Blue border
    &quot;  border-radius: 16px;&quot;              // No rounding
    &quot;  padding: 6px 12px;&quot;
    &quot;  font-size: 14px;&quot;
    &quot;  font-weight: 500;&quot;
    &quot;  min-width: 80px;&quot;
    &quot;}&quot;
;
   this.styleSheet(myStyle);

     bool bStatus;

  dpGet(&quot;MqttBrokerInformation.MqttClientConnTrigger&quot;, bStatus);
  if(bStatus )
  {
  this.text(&quot;Connected&quot;);
     string myStyle =
    &quot;QPushButton {&quot;
    &quot;  background-color: #00FFB9;&quot;       //
    &quot;  color: #000028;&quot;                  //
    &quot;  border: 1px solid #00FFB9;&quot;       //
    &quot;  border-radius: 16px;&quot;              //
    &quot;  padding: 6px 12px;&quot;
    &quot;  font-size: 14px;&quot;
    &quot;  font-weight: 500;&quot;
    &quot;  min-width: 80px;&quot;
    &quot;}&quot;
;
   this.styleSheet(myStyle);
  }
  else
  {
   this.text(&quot;Disconnected&quot;);
        string myStyle =
    &quot;QPushButton {&quot;
    &quot;  background-color: #FF4259;&quot;       //
    &quot;  color: #000028;&quot;                  //
    &quot;  border: 1px solid #FF1431;&quot;       //
    &quot;  border-radius: 16px;&quot;              //
    &quot;  padding: 6px 12px;&quot;
    &quot;  font-size: 14px;&quot;
    &quot;  font-weight: 500;&quot;
    &quot;  min-width: 80px;&quot;
    &quot;}&quot;
;
   this.styleSheet(myStyle);
  }

}
]]></script>
   </events>
  </shape>
  <shape Name="Info" layerId="0" shapeType="FRAME">
   <properties>
    <prop name="serialId">98</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">10 109</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">WF_RefDiffLineLight</prop>
    <prop name="BackColor">{0,0,0}</prop>
    <prop name="TabOrder">70</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">True</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="FillType">[outline]</prop>
    <prop name="Geometry">0.8584269662921251 0 0 1.128040973111375 1.165730337096257 776.9526248399525</prop>
    <prop name="BorderStyle">3D</prop>
    <prop name="Text">
     <prop name="en_US.utf8">State</prop>
    </prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,19,5,700,0,0,0,0,0,0,0,0,0,0,1,Bold</prop>
    </prop>
    <prop name="Location">10 109</prop>
    <prop name="Size">891 72</prop>
   </properties>
  </shape>
  <shape Name="PRIMITIVE_TEXT14" layerId="0" shapeType="PRIMITIVE_TEXT">
   <properties>
    <prop name="serialId">99</prop>
    <prop name="Type"></prop>
    <prop name="RefPoint">191.5454545454501 790.9545454545455</prop>
    <prop name="Enable">True</prop>
    <prop name="Visible">True</prop>
    <prop name="ForeColor">lightgrey</prop>
    <prop name="BackColor">_Window</prop>
    <prop name="TabOrder">71</prop>
    <prop name="ToolTipText">
     <prop name="en_US.utf8"></prop>
    </prop>
    <prop name="layoutAlignment">AlignNone</prop>
    <prop name="snapMode">Point</prop>
    <prop name="DashBackColor">_Transparent</prop>
    <prop name="AntiAliased">False</prop>
    <prop name="LineType">[solid,oneColor,JoinBevel,CapProjecting,1]</prop>
    <prop name="BorderZoomable">False</prop>
    <prop name="BorderScalable">False</prop>
    <prop name="FillType">[outline]</prop>
    <prop name="Location">191.5454545454501 790.9545454545455</prop>
    <prop name="Font">
     <prop name="en_US.utf8">Siemens Sans,-1,16,5,400,0,0,0,0,0,0,0,0,0,0,1,Roman</prop>
    </prop>
    <prop name="Text">
     <prop name="en_US.utf8">Result as JSON string</prop>
    </prop>
    <prop name="Distance">2</prop>
    <prop name="BorderOffset">2</prop>
    <prop name="Bordered">False</prop>
    <prop name="Fit">True</prop>
    <prop name="Transformable">False</prop>
    <prop name="TextFormat">[0s,,,AlignLeft]</prop>
   </properties>
  </shape>
 </shapes>
</panel>
